<div id="watch">
  <%= render 'video_controls' %>
  <%= render 'video_watch_meta', video: @video, next_episode: @next_episode, previous_episode: @previous_episode %>
  <% if @video.is_tv? %>
    <%= render 'video_upnext', next_episode: @next_episode, previous_episode: @previous_episode if @next_episode %>
  <% end %>
  <div class="video-back-button">
    <% if @video.is_a?(TvShow) && @video.series.present? %>
      <%= link_to @video.series do %>
        <i class="fa fa-arrow-circle-left"></i>
      <% end %>
    <% elsif @video.is_a?(TvShow) && @video.series.blank? %>
      <%= link_to nonepisodic_series_index_path do %>
        <i class="fa fa-arrow-circle-left"></i>
      <% end %>
    <% elsif @video.is_a?(Movie) %>
      <%= link_to movie_path(@video) do %>
        <i class="fa fa-arrow-circle-left"></i>
      <% end %>
    <% end %>
  </div>
  <div class="video-container">
    <video src="<%= stream_video_path(@video) %>"
      id="video"
      class="video-<%= @video.id %>"
      data-resume-from="<%= @video.left_off_at %>"
      data-left-off-at-path="<%= left_off_at_video_path(@video) %>"
      autoplay>
    </video>
    <canvas class="hide" id="pixel-sampler" width="8" height="8"></canvas>
  </div>
</div>
